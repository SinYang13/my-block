<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <!--  This file has been downloaded from bootdey.com @bootdey on twitter -->
    <!--  All snippets are MIT license http://bootdey.com/license -->
    <title>Forum</title>
    <link rel="icon" type="image/png" href="assets/favicon.png">
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="./assets/js/Forum.js" type="module"></script>
    <link rel="stylesheet" href="assets/css/fontawesome.css">
    <link rel="stylesheet" href="assets/css/templatemo-villa-agency.css">
    <link rel="stylesheet" href="assets/css/owl.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <link rel="icon" type="image/png" href="assets/favicon.png">
    <style type="text/css">
        body {
            /* margin-top: 20px; */
            color: #1a202c;
            text-align: left;
            background-color: #e2e8f0;
        }

        .main-body {
            margin: 20px;
        }

        .inner-wrapper {
            position: relative;
            height: calc(100vh - 3.5rem);
            transition: transform 0.3s;
        }

        @media (min-width: 992px) {
            .sticky-navbar .inner-wrapper {
                height: calc(100vh - 3.5rem - 48px);
            }
        }

        .inner-main,
        .inner-sidebar {
            position: absolute;
            top: 0;
            bottom: 0;
            display: flex;
            flex-direction: column;
        }

        .inner-sidebar {
            left: 0;
            width: 235px;
            border-right: 1px solid #cbd5e0;
            background-color: #fff;
            z-index: 1;
        }

        .inner-main {
            right: 0;
            left: 235px;
        }

        .inner-main-footer,
        .inner-main-header,
        .inner-sidebar-footer,
        .inner-sidebar-header {
            height: 3.5rem;
            border-bottom: 1px solid #cbd5e0;
            display: flex;
            align-items: center;
            padding: 0 1rem;
            flex-shrink: 0;
        }

        .inner-main-header {
            float: right;
        }

        .inner-main-body,
        .inner-sidebar-body {
            padding: 1rem;
            overflow-y: auto;
            position: relative;
            flex: 1 1 auto;
        }

        .inner-main-body .sticky-top,
        .inner-sidebar-body .sticky-top {
            z-index: 999;
        }

        .inner-main-footer,
        .inner-main-header {
            background-color: #fff;
        }

        .inner-main-footer,
        .inner-sidebar-footer {
            border-top: 1px solid #cbd5e0;
            border-bottom: 0;
            height: auto;
            min-height: 3.5rem;
        }

        @media (max-width: 767.98px) {
            .inner-sidebar {
                left: -235px;
            }

            .inner-main {
                left: 0;
            }

            .inner-expand .main-body {
                overflow: hidden;
            }

            .inner-expand .inner-wrapper {
                transform: translate3d(235px, 0, 0);
            }
        }

        .nav .show>.nav-link.nav-link-faded,
        .nav-link.nav-link-faded.active,
        .nav-link.nav-link-faded:active,
        .nav-pills .nav-link.nav-link-faded.active,
        .navbar-nav .show>.nav-link.nav-link-faded {
            color: #3367b5;
            background-color: #c9d8f0;
        }

        .nav-pills .nav-link.active,
        .nav-pills .show>.nav-link {
            color: #fff;
            background-color: #467bcb;
        }

        .nav-link.has-icon {
            display: flex;
            align-items: center;
        }

        .nav-link.active {
            color: #467bcb;
        }

        .nav-pills .nav-link {
            border-radius: .25rem;
        }

        .nav-link {
            color: #4a5568;
        }

        .card {
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, .1), 0 1px 2px 0 rgba(0, 0, 0, .06);
        }

        .card {
            position: relative;
            display: flex;
            flex-direction: column;
            min-width: 0;
            word-wrap: break-word;
            background-color: #fff;
            background-clip: border-box;
            border: 0 solid rgba(0, 0, 0, .125);
            border-radius: .25rem;
        }

        .card-body {
            flex: 1 1 auto;
            min-height: 1px;
            padding: 1rem;
        }

        .inner-main-body {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        /* Card styling */
        .card {
            border: 1px solid #e9ecef;
            border-radius: 10px;
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
        }

        /* Media section for profile image and content */
        .media {
            display: flex;
            align-items: center;
        }

        .media .mr-3 {
            border-radius: 50%;
        }

        .media-body {
            flex: 1;
            margin: 20px;
        }

        /* Post title styling */
        .media-body h6 a {
            font-size: 1.1rem;
            font-weight: bold;
            color: #343a40;
            text-decoration: none;
        }

        .media-body h6 a:hover {
            color: #007bff;
        }

        /* Post content */
        .text-secondary {
            color: #6c757d !important;
        }

        /* Comment section */
        .text-muted {
            color: #adb5bd !important;
            font-size: 0.9rem;
        }

        /* Icon styling for comments and likes */
        .text-center .far,
        .text-center .fa {
            cursor: pointer;
            transition: color 0.3s ease;
        }

        /* Heart icon styles when liked */
        .text-center .fa-heart.text-danger {
            color: #e74c3c;
        }

        .text-center .far:hover,
        .text-center .fa:hover {
            color: #007bff;
        }

        /* Responsive adjustments */
        @media (max-width: 576px) {
            .inner-main-body {
                padding: 15px;
            }

            .card-body {
                padding: 10px;
            }
        }
    </style>


</head>

<body>
    <!-- ***** Preloader End ***** -->

    <div class="sub-header">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-md-8">
                    <ul class="info">
                        <li><i class="fa fa-envelope"></i> my-block.com</li>
                        <li><i class="fa fa-map"></i> Singapore</li>
                    </ul>
                </div>
                <div class="col-lg-4 col-md-4">
                    <ul class="social-links">
                        <li><a href="https://www.facebook.com/sgsmu/"><i class="fab fa-facebook"></i></a></li>
                        <li><a href="https://x.com/sgSMU" target="_blank"><i class="fab fa-twitter"></i></a></li>
                        <li><a
                                href="https://www.linkedin.com/school/singapore-management-university/posts/?feedView=all"><i
                                    class="fab fa-linkedin"></i></a></li>
                        <li><a href="https://www.instagram.com/sgsmu/?hl=en"><i class="fab fa-instagram"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Header Area Start -->
    <header class="header-area header-sticky">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <nav class="main-nav">
                        <a href="index.html" class="logo">
                            <h1>
                                <span>
                                    <inline>MyBlock</inline>
                                </span>
                            </h1>
                        </a>
                        <ul class="nav">
                            <li><a href="announcements.html">Announcements</a></li>
                            <li><a href="events.html">Events</a></li>
                            <li><a href="forum.html" class="active">Forum</a></li>
                            <li><a href="loans.html">Loans</a></li>
                            <li><a href="services.html">Services</a></li>
                            <li id="profileLink">
                                <a href="profile.html" id="profileLinkRedir">
                                    <i class="fa fa-user" id="profileLinkImg"></i>
                                    <span id="profileLinkText">Profile</span>
                                </a>
                            </li>
                        </ul>
                        <a class="menu-trigger"><span>Menu</span></a>
                    </nav>
                </div>
            </div>
        </div>
    </header>

    <div class="page-heading header-text">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <span class="breadcrumb"><a href="index.html">Home</a> / Forum</span>
                    <h3>Forum</h3>
                </div>
            </div>
        </div>
    </div>


    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-2/css/all.min.css"
        integrity="sha256-46r060N2LrChLLb5zowXQ72/iKKNiw/lAmygmHExk/o=" crossorigin="anonymous" />
    <div class="container" id="app" v-cloak>
        <div class="main-body p-0">
            <div class="inner-wrapper">
                <!-- Inner sidebar -->
                <div class="inner-sidebar">
                    <!-- Inner sidebar header -->
                    <div class="inner-sidebar-header justify-content-center">
                        <button class="btn btn-primary has-icon btn-block" type="button" data-toggle="modal"
                            @click="openForm">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="feather feather-plus mr-2">
                                <line x1="12" y1="5" x2="12" y2="19"></line>
                                <line x1="5" y1="12" x2="19" y2="12"></line>
                            </svg>
                            NEW DISCUSSION
                        </button>
                    </div>
                    <!-- /Inner sidebar header -->

                    <!-- Inner sidebar body -->
                    <div class="inner-sidebar-body p-0">
                        <div class="p-3 h-100" data-simplebar="init">
                            <div class="simplebar-wrapper" style="margin: -16px;">
                                <div class="simplebar-height-auto-observer-wrapper">
                                    <div class="simplebar-height-auto-observer"></div>
                                </div>
                                <div class="simplebar-mask">
                                    <div class="simplebar-offset" style="right: 0px; bottom: 0px;">
                                        <div class="simplebar-content-wrapper" style="height: 100%;">
                                            <div class="simplebar-content" style="padding: 16px;">
                                                <nav class="nav nav-pills nav-gap-y-1 flex-column">
                                                    <a class="nav-link nav-link-faded has-icon"
                                                        :class="{ active: selectedCategory === 'All' }"
                                                        @click="selectedCategory = 'All'">
                                                        All
                                                    </a>
                                                    <a class="nav-link nav-link-faded has-icon"
                                                        :class="{ active: selectedCategory === 'General' }"
                                                        @click="selectedCategory = 'General'">
                                                        General
                                                    </a>
                                                    <a class="nav-link nav-link-faded has-icon"
                                                        :class="{ active: selectedCategory === 'Feedback' }"
                                                        @click="selectedCategory = 'Feedback'">
                                                        Feedback
                                                    </a>
                                                    <a class="nav-link nav-link-faded has-icon"
                                                        :class="{ active: selectedCategory === 'Lost and Found' }"
                                                        @click="selectedCategory = 'Lost and Found'">
                                                        Lost and Found
                                                    </a>
                                                </nav>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="simplebar-placeholder" style="width: 234px; height: 292px;"></div>
                            </div>
                            <div class="simplebar-track simplebar-horizontal" style="visibility: hidden;">
                                <div class="simplebar-scrollbar" style="width: 0px; display: none;"></div>
                            </div>
                            <div class="simplebar-track simplebar-vertical" style="visibility: visible;">
                                <div class="simplebar-scrollbar"
                                    style="height: 151px; display: block; transform: translate3d(0px, 0px, 0px);"></div>
                            </div>
                        </div>
                    </div>
                    <!-- /Inner sidebar body -->
                </div>
                <!-- /Inner sidebar -->

                <!-- Inner main -->
                <div class="inner-main">
                    <!-- Inner main header -->
                    <div class="inner-main-header">
                        <span class="input-icon input-icon-sm ml-auto w-auto">
                            <input type="text"
                                class="form-control form-control-sm bg-gray-200 border-gray-200 shadow-none mb-4 mt-4"
                                v-model="searchQuery" placeholder="Search forum" />
                        </span>
                    </div>
                    <!-- /Inner main header -->

                    <!-- Inner main body -->

                    <!-- Forum List -->
                    <div class="inner-main-body p-2 p-sm-3 collapse forum-content show">
                        <div class="card mb-2 animate__animated animate__fadeInUp" v-for="post in filteredPosts">
                            <div class="card-body p-2 p-sm-3 ">
                                <div class="media forum-item">
                                    <a href="#" data-toggle="collapse" data-target=".forum-content"
                                        @click="showComments(post.id)">
                                        <img :src="getRandomImage(post.author)" class="mr-3 rounded-circle" width="50"
                                            alt="User" />
                                    </a>
                                    <div class="media-body">
                                        <h6><a href="#" data-toggle="collapse" data-target=".forum-content"
                                                class="text-body" @click="showComments(post.id)">{{post.title}}</a></h6>
                                        <p class="text-secondary">
                                            {{post.content}}
                                        </p>
                                        <p v-if="post.comments.length != 0" class="text-muted">
                                            <span style="color: blue;">{{ post.comments[0].author }}</span> commented
                                        </p>
                                        <p v-else class="text-muted">No Comments yet</p>
                                    </div>
                                    <div class="text-muted small text-center align-self-center">
                                        <!-- <span class="d-none d-sm-inline-block"><i class="far fa-heart"></i> 19</span> -->
                                        <span style="padding: 5px;"><i class="far fa-comment ml-2"></i>
                                            {{post.comments.length}}</span>
                                        <a type="button" @click="liked(post.id)">
                                            <span class="d-none d-sm-inline-block">
                                                <!-- Dynamically bind the class for the heart icon based on the like status -->
                                                <i
                                                    :class="[heartStatus[post.id] ? 'fa fa-heart text-danger' : 'far fa-heart']"></i>
                                                {{post.likedCount}}
                                            </span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- /Forum List -->

                    <!-- Forum Detail -->
                    <div class="inner-main-body p-2 p-sm-3 collapse forum-content">
                        <a href="#" class="btn btn-light btn-sm mb-3 has-icon" data-toggle="collapse"
                            data-target=".forum-content"><i class="fa fa-arrow-left mr-2"
                                style="margin-right: 5px;"></i>Back</a>
                        <a href="#" style="float: right;" class="btn btn-primary btn-sm mb-3 has-icon" type="button"
                            data-toggle="modal" @click="openFormcomment"><i
                                class="fa fa-plus-left mr-2"></i>Add New Comment</a>
                        <div class="card mb-2">
                            <div class="card-body">
                                <div class="media forum-item">
                                    <a href="javascript:void(0)" class="card-link">
                                        <img :src="getRandomImage(posts.author)" class="mr-3 rounded-circle" width="50"
                                            alt="User" />
                                    </a>
                                    <div class="media-body ml-3">
                                        <a href="javascript:void(0)" class="text-secondary">{{posts.author}}</a>
                                        <!-- <small class="text-muted ml-2">1 hour ago</small> -->
                                        <h5 class="mt-1">{{posts.title}}</h5>
                                        <div class="mt-3 font-size-sm">
                                            <p>
                                                {{posts.content}}
                                            </p>
                                        </div>
                                    </div>
                                    <div class="text-muted small text-center">
                                        <span style="padding: 5px;"><i class="far fa-comment ml-2"></i>
                                            {{commentsCount}}</span>
                                        <a type="button" @click="liked(posts.id)">
                                            <span class="d-none d-sm-inline-block">
                                                <!-- Dynamically bind the class for the heart icon based on the like status -->
                                                <i
                                                    :class="[heartStatus[posts.id] ? 'fa fa-heart text-danger' : 'far fa-heart']"></i>
                                                {{posts.likedCount}}
                                            </span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card mb-2 animate__animated animate__fadeInUp" v-for="c in posts.comments" style="width: 95%; float: right;">
                            <div class="card-body">
                                <div class="media forum-item">
                                    <a href="javascript:void(0)" class="card-link">
                                        <img :src="getRandomImage(c.author)" class="mr-3 rounded-circle" width="50"
                                        alt="User" />
                                    </a>
                                    <div class="media-body ml-3">
                                        <a href="javascript:void(0)" class="text-secondary">{{c.author}}</a>
                                        <div class="mt-3 font-size-sm">
                                            <p>{{c.content}}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- /Forum Detail -->

                    <!-- /Inner main body -->
                </div>
                <!-- /Inner main -->
            </div>

            <!-- New Thread Modal -->
            <div class="modal fade" id="threadModal" tabindex="-1" role="dialog" aria-labelledby="threadModalLabel"
                aria-hidden="true">
                <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content">
                        <form>
                            <div class="modal-header d-flex align-items-center bg-primary">
                                <h6 class="modal-title mb-0" id="threadModalLabel">New Discussion</h6>
                                <!-- <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="float: right;">
                                    <span aria-hidden="true">&times;</span>
                                </button> -->
                            </div>
                            <div class="modal-body">
                                <div class="form-group">
                                    <label for="threadTitle">Category</label>
                                    <select class="form-control" id="category" name="category" v-model="category"
                                        required>
                                        <option value="General">General</option>
                                        <option value="Feedback">Feedback</option>
                                        <option value="Lost and Found">Lost and Found</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="threadTitle">Title</label>
                                    <input type="text" class="form-control" id="threadTitle" placeholder="Enter title"
                                        autofocus="" v-model="title" />
                                </div>

                                <div class="form-group">
                                    <label for="threadTitle">Content</label>
                                    <textarea class="form-control" id="content" name="content" rows="4"
                                        v-model="content" required></textarea>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-light" data-dismiss="modal">Cancel</button>
                                <button type="button" class="btn btn-primary" @click="createPost">Post</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>


            <!-- New Comment Modal -->
            <div class="modal fade" id="threadModalComment" tabindex="-1" role="dialog"
                aria-labelledby="threadModalCommentLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content">
                        <form>
                            <div class="modal-header d-flex align-items-center bg-primary text-white">
                                <h6 class="modal-title mb-0" id="threadModalCommentLabel">New Discussion</h6>
                                <!-- <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">×</span>
                                </button> -->
                            </div>
                            <div class="modal-body">

                                <div class="form-group">
                                    <label for="threadTitle">Content</label>
                                    <!-- <input type="text" class="form-control" id="threadTitle" placeholder="Enter title"
                                        autofocus="" /> -->
                                    <textarea class="form-control" id="content" name="content" rows="4"
                                        v-model="commentDetails" required></textarea>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-light" data-dismiss="modal">Cancel</button>
                                <button type="button" class="btn btn-primary"
                                    @click="postComment(posts.id)">Post</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="loginPromptModal" tabindex="-1" aria-labelledby="loginPromptLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="loginPromptLabel">Please Log In</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <p>You need to log in to continue</p>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                  <a href="login.html" class="btn btn-primary">Log In</a> <!-- Redirect to login page -->
                </div>
              </div>
            </div>
          </div>

          <div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="successModalLabel">Success</h5>
                    </div>
                    <div class="modal-body">
                        <p>Post created successfully.</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="window.location.reload()">OK</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="successModal2" tabindex="-1" aria-labelledby="successModalLabel2" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="successModalLabel">Success</h5>
                    </div>
                    <div class="modal-body">
                        <p>Comment created successfully.</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="window.location.reload()">OK</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="successModal3" tabindex="-1" aria-labelledby="successModalLabel3" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="successModalLabel">Error</h5>
                    </div>
                    <div class="modal-body">
                        <p>Please fill in all required fields before submitting.</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-dismiss="modal">OK</button>
                    </div>
                </div>
            </div>
        </div>
        


    </div>

    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript">

    </script>
</body>

</html>